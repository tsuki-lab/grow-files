var O=Object.create;var F=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var E=Object.getPrototypeOf,P=Object.prototype.hasOwnProperty;var $=t=>F(t,"__esModule",{value:!0});var b=(t,e,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of j(e))!P.call(t,s)&&s!=="default"&&F(t,s,{get:()=>e[s],enumerable:!(o=S(e,s))||o.enumerable});return t},g=t=>b($(F(t!=null?O(E(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var N=g(require("cac"));var i=g(require("fs")),u=g(require("path")),y=g(require("inquirer"));var a=t=>(...e)=>`[${t}m${e.join(" ")}[0m`,r={black:a("30"),red:a("31"),green:a("32"),yellow:a("33"),blue:a("34"),magenta:a("35"),cyan:a("36"),white:a("37")};var D=async t=>{let e=C(t.templatesDir),o=[!t.outputFileName&&{type:"input",message:"What's outputFileName.",name:"outputFileName",default:"index"},{type:"list",name:"template",message:"Choose a template.",choices:e}].filter(Boolean),s=await v(t,o),n=u.join(t.templatesDir,s.template),l=w(n,s.outputDir,s.outputFileName);q(l),console.log("");let p=k(l);if(0<p.length){let c=`Error: The file already exists. Please remove ${p.reduce((m,f)=>m?`${m} and "${f}"`:`"${f}"`,"")}.`;console.error(r.red(c)),process.exit(1)}A(l)};async function v(t,e){let o=JSON.parse(JSON.stringify(t));return await(0,y.prompt)(e).then(s=>{s.outputFileName&&(o.outputFileName=s.outputFileName),o.template=s.template}),o}function C(t){return i.readdirSync(t).filter(e=>{let o=u.join(t,e);return i.statSync(o).isDirectory()})}function w(t,e,o){return i.readdirSync(t).filter(n=>{let l=u.join(t,n);return i.statSync(l).isFile()}).reduce((n,l)=>{let p=u.join(t,l),d=p.split("/"),c=d[d.length-1],m=c.indexOf("."),f=c.substring(m),x=i.readFileSync(p,"utf-8");return n.push({path:u.join(e,o+f),data:x.replace(/\$FILE_NAME/g,o)}),n},[])}function q(t){let e=t[0].path.split("/").filter((o,s,n)=>s!==n.length-1).join("/");e&&i.mkdirSync(e,{recursive:!0})}function k(t){return t.map(e=>e.path).map(e=>i.existsSync(e)&&e).filter(e=>e)}function A(t){t.forEach(e=>{i.writeFileSync(e.path,e.data,"utf-8"),console.log(r.green("\u2728  Create file",e.path))})}var h=(0,N.default)();h.command("[name]").option("-o, --output-dir <path>","selected outputDir",{default:"./"}).option("-t, --templates-dir <path>","Selected templates dir",{default:"./templates"}).action(async(t,e)=>{let o={templatesDir:e.templatesDir,template:"",outputDir:e.outputDir,outputFileName:t};console.log(r.cyan("Options:")),console.log(r.cyan("- outputDir:",o.outputDir)),console.log(r.cyan("- templatesDir:",o.templatesDir)),o.outputFileName&&console.log(r.cyan("- outputFileName:",o.outputFileName)),console.log(""),await D(o)});h.help();h.version("0.1.4");h.parse();
