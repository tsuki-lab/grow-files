var x=Object.create;var g=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var j=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty;var $=t=>g(t,"__esModule",{value:!0});var P=(t,e,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of S(e))!E.call(t,s)&&s!=="default"&&g(t,s,{get:()=>e[s],enumerable:!(o=O(e,s))||o.enumerable});return t},c=t=>P($(g(t!=null?x(j(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var N=c(require("cac"));var i=c(require("fs")),l=c(require("path")),F=c(require("inquirer"));var n=t=>(...e)=>`[${t}m${e.join(" ")}[0m`,r={black:n("30"),red:n("31"),green:n("32"),yellow:n("33"),blue:n("34"),magenta:n("35"),cyan:n("36"),white:n("37")};var D=async t=>{let e=C(t.templatesDir),o=[!t.outputFileName&&{type:"input",message:"What's outputFileName.",name:"outputFileName",default:"index"},{type:"list",name:"template",message:"Choose a template.",choices:e}].filter(Boolean),s=await v(t,o),a=l.join(t.templatesDir,s.template),p=b(a,s.outputDir,s.outputFileName);w(p),console.log("");let u=q(p);if(0<u.length){let f=`Error: The file already exists. Please remove ${u.reduce((d,y)=>d?`${d} and "${y}"`:`"${y}"`,"")}.`;console.error(r.red(f)),process.exit(1)}k(p)};async function v(t,e){let o=JSON.parse(JSON.stringify(t));return await(0,F.prompt)(e).then(s=>{s.outputFileName&&(o.outputFileName=s.outputFileName),o.template=s.template}),o}function C(t){return i.readdirSync(t).filter(e=>{let o=l.join(t,e);return i.statSync(o).isDirectory()})}function b(t,e,o){return i.readdirSync(t).filter(a=>{let p=l.join(t,a);return i.statSync(p).isFile()}).reduce((a,p)=>{let u=l.join(t,p),h=l.extname(u),f=i.readFileSync(u,"utf-8");return a.push({path:l.join(e,o+h),data:f.replace(/\$FILE_NAME/g,o)}),a},[])}function w(t){let e=t[0].path.split("/").filter((o,s,a)=>s!==a.length-1).join("/");i.mkdirSync(e,{recursive:!0})}function q(t){return t.map(e=>e.path).map(e=>i.existsSync(e)&&e).filter(e=>e)}function k(t){t.forEach(e=>{i.writeFileSync(e.path,e.data,"utf-8"),console.log(r.green("\u2728  Create file",e.path))})}var m=(0,N.default)();m.command("[name]").option("-o, --output-dir <path>","selected outputDir",{default:"./"}).option("-t, --templates-dir <path>","Selected templates dir",{default:"./templates"}).action(async(t,e)=>{let o={templatesDir:e.templatesDir,template:"",outputDir:e.outputDir,outputFileName:t};console.log(r.cyan("Options:")),console.log(r.cyan("- outputDir:",o.outputDir)),console.log(r.cyan("- templatesDir:",o.templatesDir)),o.outputFileName&&console.log(r.cyan("- outputFileName:",o.outputFileName)),console.log(""),await D(o)});m.help();m.version("0.1.0");m.parse();
